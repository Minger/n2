- cache :featured_items_html do
  - featured_items ||= FeaturedItem.find_root_by_item_name('featured_template')
  - if featured_items.present?
    - section1 = featured_items.children.first
    - section2 = featured_items.children.second
    - section3 = featured_items.children.third
    - section4 = featured_items.children.fourth
    - section5 = featured_items.children.fifth
    - section6 = featured_items.children[5]
    #featuredPanel.panel_1.featureWrap
      - case featured_items.featured_type
        - when 'template_1'
          = render :partial => 'shared/featured_items/panelbar'
          = render :partial => 'shared/featured_items/panel3', :locals => { :item => section1.children.first.featurable }
        - when 'template_2'
          = render :partial => 'shared/featured_items/panelbar'
          = render :partial => 'shared/featured_items/panel3_subheads', :locals => { :primary1 => section1.children.first.featurable, :secondary1 => section1.children.second.featurable, :secondary2 => section1.children.third.featurable }
        - when 'template_3'
          = render :partial => 'shared/featured_items/panelbar'
          = render :partial => 'shared/featured_items/panel4', :locals => { :item => section1.children.first.featurable }
          = render :partial => 'shared/featured_items/panel4', :locals => { :item => section2.children.first.featurable }
        - when 'template_4'
          = render :partial => 'shared/featured_items/panelbar'
          = render :partial => 'shared/featured_items/panel4c', :locals => { :item => section1.children.first.featurable }
          = render :partial => 'shared/featured_items/panel4c', :locals => { :item => section2.children.first.featurable }
        - when 'template_5'
          = render :partial => 'shared/featured_items/panelbar'
          = render :partial => 'shared/featured_items/panel5', :locals => { :item => section1.children.first.featurable }
          = render :partial => 'shared/featured_items/panel5', :locals => { :item => section2.children.first.featurable }
          = render :partial => 'shared/featured_items/panel5', :locals => { :item => section3.children.first.featurable }
        - when 'template_6'
          - primary1 = section1.children.first.featurable
          = render :partial => 'shared/featured_items/panelbar'
          .featureWrap
            %br
            .thumb
              - if primary1.video_item?
                = embed_video primary1.featured_video, :size => 'large'
              - else
                = link_to image_tag(primary1.featured_image_url), primary1.featured_url
            .itemBlock
              %h1= link_to primary1.featured_title, primary1.featured_url
              %p
                = caption(sanitize(strip_tags(primary1.featured_blurb)),300)
                = link_to 'More...', primary1
              %span.btnComment== #{like_link primary1} #{primary1.num_votes}
              %span.btnComment== #{link_to t("#{primary1.featured_related_locale}"), primary1} #{primary1.featured_related_count}
            %p
        - when 'template_7'
          = render :partial => 'shared/featured_items/panelbar'
          = render :partial => 'shared/featured_items/panel4b', :locals => { :item => section1.children.first.featurable }
          = render :partial => 'shared/featured_items/panel4b', :locals => { :item => section2.children.first.featurable }
          = render :partial => 'shared/featured_items/panel4b', :locals => { :item => section3.children.first.featurable }
          = render :partial => 'shared/featured_items/panel4b', :locals => { :item => section4.children.first.featurable }
        - when 'template_8'
          - primary1 = section1.children.first.featurable
          = render :partial => 'shared/featured_items/panelbar'
          .thumb.wide
            = link_to image_tag(primary1.featured_image_url), primary1.featured_url
          .itemBlock
            %h1= link_to primary1.featured_title, primary1.featured_url
            %p
              = caption(sanitize(strip_tags(primary1.featured_blurb)),200)
              = link_to 'More...', primary1
            -# %span.btnComment== #{like_link primary1} #{primary1.num_votes}
            -# %span.btnComment== #{link_to t("#{primary1.featured_related_locale}"), primary1} #{primary1.featured_related_count}
        - when 'template_9'
          - a = [ section1.children.first.featurable, section2.children.first.featurable, section3.children.first.featurable, section4.children.first.featurable, section5.children.first.featurable, section6.children.first.featurable ]
          = render :partial => 'shared/featured_items/panelbar'
          .feature_scrollable_panel_3
            .feature_scrollable_items
              - a.each do |item|
                .panel_items
                  = render :partial => 'shared/featured_items/panel3', :locals => { :item => item }                
        :javascript
          $(function() {          	
          	$(".feature_scrollable_panel_3").scrollable({circular: true}).autoscroll({ autoplay: true});
          });
        - when 'template_32'
          - box_list = [0, 2, 4]
          - a = [ section1.children.first.featurable, section2.children.first.featurable, section3.children.first.featurable, section4.children.first.featurable, section5.children.first.featurable, section6.children.first.featurable ]
          = render :partial => 'shared/featured_items/panelbar'
          .feature_scrollable_panel_4
            .feature_vertical_scrollable_items
              - box_list.each do |index|
                .panel_items
                  = render :partial => 'shared/featured_items/panel4', :locals => { :item => a[index] }
                  = render :partial => 'shared/featured_items/panel4', :locals => { :item => a[index+1] }
          :javascript
            $(function() {            
              $(".feature_scrollable_panel_4").scrollable({circular: true, vertical: true, mousewheel: true}).autoscroll({ autoplay: true});
            });
        - when 'template_52'
          - box_list = [0, 3]
          - a = [ section1.children.first.featurable, section2.children.first.featurable, section3.children.first.featurable, section4.children.first.featurable, section5.children.first.featurable, section6.children.first.featurable ]
          = render :partial => 'shared/featured_items/panelbar'
          .feature_scrollable_panel_5
            .feature_vertical_scrollable_items
              - box_list.each do |index|
                .panel_items
                  = render :partial => 'shared/featured_items/panel5', :locals => { :item => a[index] }
                  = render :partial => 'shared/featured_items/panel5', :locals => { :item => a[index+1] }
                  = render :partial => 'shared/featured_items/panel5', :locals => { :item => a[index+2] }
          :javascript
            $(function() {            
              $(".feature_scrollable_panel_5").scrollable({circular: true, vertical: true, mousewheel: true}).autoscroll({ autoplay: true});
            });
