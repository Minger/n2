- refine ||= true
- page ||= ""
- cache_if page.present?, "articles_list_#{page}html" do
  - contents ||= Article.top_items.paginate :page => params[:page], :per_page => 10, :order => "created_at desc"
  - paginate ||= false
  .panel_1
    .panelBar
      %h2= t('.articles_title')
      - if refine===true and contents.present? and contents.first.refineable?
        .refine_link
          = render :partial => 'shared/forms/refine_dropdown'
    .subtitle
      %span= t('.articles_subtitle')
    .itemListWrap
      .list_items
        %ul
          - contents.each do |article|
            - content = article.is_a?(Article) ? article.content : article
            %li{'data-id' => content.cache_key}
              .article
                .thumb
                  - if content.images.present?
                    = image_tag content.images.first.url(:thumb)
                  - else
                    = image_tag ('default/watermark.jpg', :width => "100%")
                .itemBlock
                  %h2= link_to content.title, story_path(content)
                  %p= linked_story_caption content
                  .profilePic= local_linked_profile_pic content.user
                  .itemMeta
                    %h3= t('.stories_posted_by', :fb_name => local_linked_profile_name(content.user), :date => time_ago_in_words(content.created_at))
                    %span.btnComment== #{like_link content} #{content.votes_tally}
                    %span.btnComment== #{link_to t('comments'), story_path(content, :anchor => "commentListTop")} #{content.comments_count}
 
    - if paginate
      .clearfix
        = will_paginate contents
        %br
    - else
      .clearfix
      %p= link_to t('read_more'), articles_path, :class => "float_right"
      %br
