// CSS --------------------------------------------------- //
// global ------------------------------ //
body
  color: $primary-body-color
  font-family: $primary-body-font
  font-size: $primary-body-size

// text -------------------------------- //

// headers
h1, h2, h3, h4, h5, h6
  font-family: $primary-header-font
  font-weight: normal
  line-height: $primary-line-height
  padding: 0
  margin: 0
h1, h2
  color: $primary-header-color
  a
    color: $primary-header-color
    &:hover
      color: scale-color($primary-header-color, $lightness:  -50%)
      text-decoration: none
h3, h4, h5
  color: $secondary-header-color
  a
    color: $secondary-header-color
    &:hover
      color: scale-color($secondary-header-color, $lightness: -50%)
      text-decoration: none
h1
  font-size: $h1-size
h2
  font-size: $h2-size
h3
  font-size: $h3-size
h4
  font-size: $h4-size
  font-weight: bold
h5
  font-size: $h5-size
h6
  color: $tertiary-header-color
  font-size: $h6-size
// text
a
  color: $primary-link-color
  text-decoration: none
  &:focus
    outline: none
  &:hover
    color: scale-color($primary-link-color, $lightness: -50%)
    cursor: pointer
    text-decoration: underline
p
  line-height: $primary-line-height
  margin-bottom: $gutter / 2


// containers -------------------------- //
#page
  width: 960px
  margin: 0 auto

#header, #footer
  width: 960px
  position: relative

#home-content
  float: left
  position: relative
  display: inline
  width: 960px
  z-index: 1


// header ------------------------------ //
#header
  border-bottom: 1px solid scale-color($primary-tab-off, $lightness: $tab-border-lightness)
  margin-bottom: 20px
  background-color: $primary-bg-color
  background-image: image_url("skin/bg-header.gif")
  background-position: bottom left
  background-repeat: no-repeat
  height: 130px
  padding-bottom: 30px
  z-index: 10
  // Site name (h1) or <img />
  #site-name-wrap
    display: block
    position: absolute
    top: 10px
    left: 10px
    #site-name
      color: $primary-bg-color
      display: block
  #site-sponsor
    display: none

// Primary Navigation
#primary-navigation
  position: absolute
  width: 940px
  bottom: 0px
  left: 10px
  z-index: 2
  // parent tabs
  > ul
    float: right
    display: block
    height: 30px
    > li
      margin-left: 1px
      position: relative
      z-index: 10
      // dropdown for current tab
      &.selected
        > a
          height: 22px
        > ul
          background-color: $primary-tab-on
          border: 1px solid scale-color($primary-tab-off, $lightness: $tab-border-lightness)
          > li
            > a
              color: scale-color($primary-tab-off, $lightness: $tab-border-lightness)
              text-shadow: none
              &:hover
                color: $primary-tab-on
                text-shadow: 1px 1px 1px scale-color($primary-tab-off, $lightness: $tab-border-lightness)
      // hover states
      &:hover
        > a
          background-color: scale-color($primary-tab-off, $lightness: $tab-border-lightness)
          position: relative
          z-index: 10
        > ul
          display: block
      > a
        height: 21px
        padding: 8px 10px 0
      // dropdowns
      > ul
        background-color: scale-color($primary-tab-off, $lightness: $tab-border-lightness)
        box-shadow: $box-shadow
        display: none
        float: none
        padding: 5px
        position: absolute
        top: 30px
        right: 0px
        min-width: 120px
        > li
          display: block
          margin: 0
          padding: 0
          z-index: 20
          > a
            color: $primary-tab-on 
            display: block
            font-size: $primary-body-size
            padding: 5px 10px
            white-space: nowrap
            text-shadow: 1px 1px 1px scale-color($primary-tab-off, $lightness: $tab-border-lightness)
            &:hover
              background-color: $primary-tab-off
              text-decoration: none


// Secondary Navigation
#secondary-navigation
  +grid(12)
  border-bottom: 1px solid scale-color($primary-tab-off, $lightness: -20%)
  height: 20px
  margin-bottom: 20px
  // tabs
  > ul
    height: 20px
    padding-left: 10px
    > li
      margin-right: 1px
      > a
        font-size: $primary-body-size - 2px
        height: 14px
        padding: 5px 10px 0
        &.selected
          height: 15px

// Shared Navigation Styles
#primary-navigation, #secondary-navigation
  > ul > li
    display: block
    float: left
  > ul > li > a
    background-color: $primary-tab-off
    border: 1px solid scale-color($primary-tab-off, $lightness: $tab-border-lightness)
    border-bottom-width: 0
    color: $primary-tab-on
    display: block
    font-weight: bold
    text-decoration: none
    text-shadow: 1px 1px 1px $primary-border-color
    &.selected
      border: 1px solid scale-color($primary-tab-off, $lightness: $tab-border-lightness)
      border-bottom-width: 0
      background-color: $primary-tab-on
      color: #666
      text-decoration: none
      text-shadow: none
      &:hover
        background-color: $primary-tab-on
        text-decoration: none
    &:hover
      background-color: scale-color($primary-tab-off, $lightness: $tab-border-lightness)



#header-actions
  background: image_url("site/bg-hdr-actions.png") top left repeat-y
  padding: 10px 10px 10px 80px
  position: absolute
  top: 0px
  right: 0px
  .pipe
    margin: 0 4px
.account-dropdown
  float: left
  position: relative
  z-index: 10
  .account-loading-spinner
    background: transparent image_url("site/spinner-tiny.gif") center no-repeat
    height: 20px
  .account-links
    background: #FFF
    border: 1px solid #CCC
    padding: 10px
    position: absolute
    right: 0
    top: 18px
    width: 140px
    li
      padding-top: 10px
    .account-profile
      border-bottom: 1px solid #CCC
      padding-top: 0
      padding-bottom: 10px
      padding-left: 50px
      .profile-pic
        float: left
        margin-left: -50px




// Content ----------------------------------------------- //
// breadcrumbs
.breadcrumbs
  +grid(12)
  margin-bottom: 20px
  position: relative
  > p
    font-weight: bold
    margin-bottom: 0
    > a
      font-weight: normal
    > span
      color: #666

// Panels
.panel-1
  +grid(4)
.panel-2
  +grid(8)
.panel-3
  +grid(12)

// panel margin removal
.panel-1, .panel-2, .panel-3
  min-height: 80px 

  .first
    +alpha()
  .last
    +omega()
  // panel margin removal for feature panels
  .feature-panel
    .first
      +alpha() 
    .last
      +omega()

// Shared Classes ---------------------- //
// Panel Bar
.panel-bar
  border-bottom: 1px solid $secondary-border-color
  padding: 4px 0 0 0
  position: relative
  > h2
    color: $tertiary-header-color
    font-size: 12px
    margin-bottom: 0
    text-transform: uppercase
  > .panel-bar-actions
    font-size: 11px
    float: right
    position: absolute
    top: 6px
    right: 0px

// Thumb
.thumb
  border: 1px solid scale-color($primary-bg-color, $lightness: -30%)
  img
    max-width: 300px
    border: 1px solid scale-color($primary-bg-color, $lightness: -30%)

// Profile Pics
.profile-pic
  border: 1px solid scale-color($primary-bg-color, $lightness: -30%)
  width: 38px
  height: 38px
  position: relative
  z-index: 1
  img
    width: 100%
    height: 100%
    z-index: 2
  .moderator
    height: 16px
    width: 16px
    position: absolute
    left: 2px
    bottom: 2px
    z-index: 3

// Meta Data
.item-meta-data
  margin-bottom: $gutter / 2
  .meta-data-actions
    font-size: 11px


// Subtitle
.subtitle
  border: 1px solid scale-color($tertiary-bg-color, $lightness: -10%)
  background-color: $tertiary-bg-color
  color: $tertiary-body-color
  padding: 8px 
.panel-1, .panel-2, .panel-3
  .subtitle
    margin-top: -1px

// Item List
.item-list-wrap
  padding-top: $gutter / 2
  .item-list
    li
      border-bottom: 1px solid scale-color($primary-bg-color, $lightness: -10%)
      display: block
      margin-bottom: $gutter / 2
      // for featured panels only
      &.first
        border-top: 1px solid scale-color($primary-bg-color, $lightness: -10%)
        padding-top: $gutter / 2
      &.last
        border-bottom: none
        padding-bottom: 0
        margin-bottom: 0
      // header vertical spacing
      h1, h2, h3, h4, h5, h6
        margin-bottom: 0
      // paragraph vertical spacing
      p
        margin-bottom: $gutter / 2

// Featured Panels --------------------- //
.feature-panel
  float: left
  margin-bottom: $gutter
  .item-list-wrap
    .item-list
      ul
        padding-top: 0
  .feature-item-large
    +grid(5)
    position: relative
  .feature-item-medium
    +grid(4)
    position: relative
  .feature-item-wrap-small
    float: left
    +grid(3)
    .feature-item-small
      +grid(3)
      +alpha()
      height: 132px
      overflow: hidden
      position: relative
      &.top
        margin-bottom: $gutter + 1
  // Featured Panel Shared Styles
  .feature-item-small, .feature-item-medium, .feature-item-large, .feature-item-third
    .item-list-wrap
      padding-top: 0
    img
      width: 100%
      position: relative
      top: 0
      left: 0
    .feature-caption
      background: rgba(0,0,0, 0.8) // make black png tile for compatability
      padding: 10px
      position: absolute
      bottom: 0
      left: 0
      right: 0
      h1, h2, h3, h4, h5, h6, p,
        color: #FFF
        margin-bottom: 0
        text-shadow: 1px, 1px, 1px, #000
        a
          color: #FFF

// Two Column Three Item Widget
.panel-2
  .feature-panel
    .feature-item-third
      float: left
      position: relative
      width: 200px
      &.first
        margin-right: 10px
      &.last
        margin-left: 10px


// Full Column ------------------------- //
#full-col
  +grid(12)
  .panel-3
    margin-left: 0
    margin-right: 0

// Three Column Widgets


// Left Column ------------------------- //
#left-col
  +grid(8)
  margin-bottom: $gutter * 2
  .panel-2
    margin-left: 0
    margin-right: 0

// Two Column Widgets
.panel-2
  // two column item list 
  .item-list-wrap
    .item-list
      // shared thumb styling
      .story, .question, .resource, .idea, .article-content, .event-description
        padding-left: 140px
        min-height: 90px
        .thumb
          float: left
          margin-left: -140px
          > img
            width: 118px
            height: 88px
      // styles for news stories, questions, resources and ideas
      .story, .question, .resource, .idea
        .item-meta-data
          padding-left: 50px
          min-height: 40px
          .profile-pic
            float: left
            margin-left: -50px
      // styles for events (interior pages)
      .event
        display: table-row
        > div
          display: table-cell
        .event-description
          padding-left: 0
          width: 75%
          .thumb
            margin-left: 0
          .item-content, .item-meta-data
            margin-left: 140px
            margin-right: 10px
        .item-meta-data
          padding-left: 50px
          min-height: 40px
          .profile-pic
            float: left
            margin-left: -50px
        .event-details
          border-left: 1px solid #ccc
          width: 25%
          font-size: 11px
          h5
            font-weight: bold
            margin-bottom: 5px
            margin-left: 10px
          > p
            margin-bottom: 5px
            padding-left: 10px
            > span
              display: block
              margin-bottom: 5px
// Gallery
.gallery-content
  padding-top: $gutter / 2
  li
    +grid(2)
    margin-bottom: $gutter
    img
      width: 100%
    &.hide-strong
      display: none
  .single-gallery-item
    +grid(4)
    +alpha()
    +omega()
    margin-bottom: $gutter
    margin-top: -$gutter / 2
    img
      width: 100%

// Right Column ------------------------ //
#right-col
  +grid(4)
  margin-bottom: $gutter * 2
  .panel-1
    margin-left: 0
    margin-right: 0
    .info-widget
      margin-bottom: $gutter / 2

// Single Column Widgets
.panel-1
  margin-bottom: $gutter / 2
  // header bottom margin removal
  h3, h4, h5
    margin-bottom: 0
  // panel-content styles
  .panel-content
    padding-top: $gutter / 2
    margin-bottom: $gutter / 2

  // users online widget
  .users-online
    background-color: $tertiary-bg-color
    display: block
    padding: 10px 5px 0
    margin-bottom: 20px
    > ul > li
      float: left
      width: 31px
      height: 31px
      margin: 0 5px 10px
      > .profile-pic
        height: 30px
        width: 30px
  // bio widget
  .bio
    padding-top: $gutter / 2
    font-size: 11px
    .profile-pic
      float: left
      margin-right: 10px
      margin-bottom: 10px


// Info Widget (Welcome Panel, What is this? panel, etc...)
.info-widget
  background: $tertiary-bg-color
  margin-bottom: $gutter / 2
  .item-block
    padding: $gutter / 2
    border: 1px solid scale-color($tertiary-bg-color, $lightness: -10%)
    min-height: 40px
  .profile
    padding-left: 60px
    .profile-pic
      float: left
      margin-left: -50px
  .actions-wrap
    border: 1px solid scale-color($tertiary-bg-color, $lightness: -10%)
    border-top-width: 0
    padding: $gutter / 2
    text-align: center

// Bookmarklet Styles //
.bookmarklet
  padding: $gutter / 2 $gutter /2 0 
  border-bottom: 1px solid scale-color($tertiary-bg-color, $lightness: -30%)
  background: $tertiary-bg-color
  > h2
    font-weight: bold
  > p
    text-align: center
  .demo
    background: #FFF
    margin-bottom: $gutter / 2
    padding: $gutter / 2 0px
    position: relative
    text-align: center
    .demo-img
      margin: 0 auto
      position: relative
      z-index: 1
  .button-link
    font-size: $primary-body-size
    position: absolute
    left: $gutter / 2
    bottom: $gutter
    z-index: 10

// Buttons (Button styling for links only)
.button-link
  display: inline-block
  padding: 5px 10px
  border: 1px solid scale-color($primary-btn, $lightness: -30%)
  background: $primary-btn image_url("site/btn-gradient.png") top left repeat-x
  color: $primary-bg-color
  font-size: $primary-body-size + 2
  line-height: $primary-body-size +2
  text-shadow: -1px -1px 1px 1px scale-color($primary-btn, $lightness: -40%)
  &:hover
    color: $primary-bg-color
    background: scale-color($primary-btn, $lightness: -40%) image_url("site/btn-gradient.png") top left repeat-x
    text-decoration: none
    text-shadow: -1px -1px 1px 0px $primary-btn

// Comment Rating Buttons
.thumb-up, .thumb-down, .likes-tally
  border: 1px solid scale-color($tertiary-bg-color, $lightness: -10%)r
  display: block
  float: left
  height: 16px
  margin-right: 2px
.thumb-up, .thumb-down
  background-color: #FFF
  background-position: center 
  background-repeat: no-repeat
  width: 24px
  &:hover
    background-color: scale-color($tertiary-bg-color, $lightness: -10%)
.thumb-up
  background-image: image_url("site/thumb-up.gif") 
.thumb-down
  background-image: image_url("site/thumb-down.gif")
.likes-tally
  font-size: 11px
  line-height: 16px
  padding: 0 4px


// Moderator Styles
.mod-flag-wrap
  position: relative
  z-index: 2
.flag-wrap
  display: inline-block
  position: relative
  z-index: 1
  .flag-toggle
    position: relative
    z-index: 2
  .flag-box
    background: $primary-bg-color
    border: 1px solid scale-color($primary-bg-color, $lightness: -20%)
    box-shadow: $box-shadow
    padding: 30px 10px 10px
    position: absolute
    top: -11px
    right: -11px
    z-index: 1

// Tags
.top-tags
  padding-top: 10px
  > ul
    > li
      float: left
      margin: 0 5px 10px
      font-size: $primary-body-size - 1
      color: $tertiary-header-color
      > a
        font-size: $primary-body-size

// Item Details Page
#item-details
  h1, h2, h3, h4
    margin-bottom: 0
  .item-block, .item-meta-data
    margin-bottom: $gutter
  //Story content area
  .item-details-content
    line-height: $primary-line-height
    margin-bottom: $gutter
  // Story Thumbnail
  .thumb
    float: right
    margin-left: $gutter
    margin-bottom: $gutter
    height: 225px
    width: 300px
  // Add This wrapper
  .add-this-wrap
    margin-bottom: $gutter
  // media curtain
  .media-wrap
    position: relative
    background: #000 image_url("site/curtain.png") top left repeat-x
    margin-bottom: $gutter
  // media on the show page
  .video
    width: 480px
    margin: 0 auto
    z-index: 1
    object
      width: 480px
      z-index: 1


// Shared Arrow Styling
.arrow, .arrow-inner
  display: block
  position: absolute
  border-top-color: transparent
  border-right-color: transparent
  border-bottom-color: transparent
  border-left-color: transparent
  border-style: solid
  height: 0
  width: 0


// Comment Thread
.comment-thread-wrap
  padding: $gutter / 2 $gutter 0 $gutter
  margin-bottom: $gutter
  .comment-block
    margin-bottom: 10px
    .comment-bubble
      background: #FFF
      border: 2px solid scale-color($primary-bg-color, $lightness: -20%)
      padding: 20px
      position: relative
      .arrow
        border-width: 16px
        border-top-color: scale-color($primary-bg-color, $lightness: -20%)
        border-right-color: scale-color($primary-bg-color, $lightness: -20%)
        bottom: -32px
        left: 16px
        .arrow-inner
          border-width: 16px
          border-top-color: #FFF
          border-right-color: #FFF
          top: -21px
          left: -18px
    .comment-meta-data
      height: 40px
      padding-top: 10px
      padding-left: 60px
      position: relative
      z-index: 1
      .profile-pic
        float: left
        margin-right: 10px
      .meta-data-actions
        padding-top: 4px
      .mod-flag-wrap
        float: right

// Post Comment
.post-comment
  .form-wrap
    margin-bottom: $gutter
    fieldset
      padding: 0 4px
    textarea
      margin: 0
      margin-left: -3px
      border: 1px solid #ccc
      width: 100%

// Permalink
#link-to-item
  .item-block
    background: $tertiary-bg-color
    padding: 10px 12px
    input.text-field
      margin-left: -2px
      border: 1px solid scale-color($tertiary-bg-color, $lightness: -20%)
      height: 20px
      width: 100%


// refine search 
.refine-search-wrap
  font-size: 11px
  float: right
  position: relative
  z-index: 2
  top: 2px
.refine-wrap
  display: inline-block
  position: relative
  z-index: 1
  .refine-toggle
    position: relative
    z-index: 2
  .refine-box
    background: $primary-bg-color
    border: 1px solid scale-color($primary-bg-color, $lightness: -20%)
    box-shadow: $box-shadow
    padding: 30px 10px 10px
    position: absolute
    top: -11px
    right: -11px
    z-index: 1

// pagination
.pagination
  text-align: right
  margin-bottom: $gutter
  font-size: $primary-body-size
  a, span
    display: inline-block
    padding: 2px
  a
    color: $tertiary-link-color
  span
    &.disabled
      color: $tertiary-body-color
      background: none
      &:hover
        text-decoration: none
        cursor: default
    &.current
      color: scale-color($tertiary-link-color, $lightness: 100%)
      background: $tertiary-link-color
      border: 1px solid $tertiary-link-color

// Ads
.ad_160, .ad_200, .ad_250, .ad_300, .ad_336, .ad_468, .ad_728, .sponsor_250
  background: #CCC image_url("site/bg-ad-title.gif") top center no-repeat
  border: 5px solid #CCC
  border-top-width: 0
  margin: 0 auto
  margin-bottom: $gutter
  padding-top: 15px
  box-shadow: 0px 0px 4px rgba(0,0,0, .25)
  -moz-box-shadow: 0px 0px 4px rgba(0,0,0, .25)
  -webkit-box-shadow: 0px 0px 4px rgba(0,0,0, .25)
  .test-frame
    background-color: #FFF
    height: 80px
    width: 100%
    &.sky-scraper
      height: 600px
  iframe, html, body
    padding: 0
    margin: 0
#adspace
  +grid(12)
.ad_160
  width: 160px
.ad_200
  width: 200px
.ad_250
  width: 250px
.ad_300
  width: 300px
.ad_336
  width: 336px
.ad_468
  width: 468px
.ad_728
  width: 728px
.sponsor_250
  width: 250px
  background: #CCC image_url("site/bg-sponsor-title.gif") top center no-repeat

// predictions
.prediction-details 
  .item-details
    margin-bottom: $gutter * .5
  .vote-options
    border: 1px solid #ccc
    padding: 10px 10px 0
    margin-bottom: 10px
    ul
      display: inline-block
      width: 100%
      margin: 0 
      padding: 0
    li
      background-color: #999
      float: left
      width: 100%
      padding: 5px 0
      margin-bottom: 10px
    .vote-opt-list
      ul
        margin-bottom: 10px
      li.option-item
        &:hover
          background-color: #666
        label
          display: block
          padding:  $gutter * .5 $gutter * .5 $gutter * .5 $gutter * 1.15
          font-weight: bold
        input
          float: left
          margin: $gutter * .5 0 $gutter * .5 $gutter * .25
    .results-list
      li.results-item
        background-color: #999
        &.user-choice
          background-color: #666
        .numbers
          float: left
          width: 30%
          span
            text-align: center
            display: block
            padding: 5px
            font-weight: bold
        .voter-profiles
          margin-left: -1px
          border-left: 1px solid $primary-bg-color
          float: left
          width: 70%
          .profile-pic
            margin: 0 0 0 10px
  .pred-nav-bar
    padding: 5px 0
    background-color: #f1f1f1
    display: inline-block
    width: 100%
    margin-bottom: 10px
    
    a
      color: $primary-link-color
      display: inline-block
      font-weight: bold
      padding: 0 5px
      
      &.previous
        float: left
      &.next
        float: right


// My Profile
#my-profile
  .profile, .statistics
    padding-top: $gutter / 2
  .profile
    +grid(4)
    +alpha()
    .item-block
      padding-left: 50px
      margin-bottom: $gutter
      .profile-pic
        float: left
        margin-left: -50px
    .bio-block
      
  .statistics
    +grid(4)
    +omega()
    table
      width: 100%
      td
        padding: 5px 10px


// footer ----------------------------- //
#footer
  border-top: 1px solid $secondary-border-color
  margin: 0 auto
  padding-top: $gutter /2
  width: 960px
  background-color: $tertiary-bg-color
  .footer-panel
    +grid(4)
    margin-bottom: $gutter

// jquery related css ----------------- //
// flash errors
.flash
  margin: 0 auto
  clear: both
  z-index: 900
  position: relative
  p
    position: absolute
    top: -5px
    width: 80%
    padding: 5px
    margin: 0 10%
    font-weight: bold
    font-size: 13px
    display: block
    text-align: center
    color: $primary-bg-color
  &.flash_error
    p
      border: $flashErrorBorder
      background: $flashErrorBG
  &.flash_success
    p
      border: $flashSuccessBorder
      background: $flashSuccessBG
  &.flash_notice, &.info
    p
      border: $flashNoticeBorder
      background: $flashNoticeBG
  &.flash_warning
    p
      border: $flashWarningBorder
      background: $flashWarningBG

/* Clear Floats and Fixes */
.clear 
  clear: both
  display: block
  overflow: hidden
  visibility: hidden
  width: 0
  height: 0

.clearfix:after 
  clear: both
  content: ' '
  display: block
  font-size: 0
  line-height: 0
  visibility: hidden
  width: 0
  height: 0

* html .clearfix, *:first-child+html .clearfix 
  zoom: 1



